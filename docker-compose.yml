version: "3.9"
services:
  pinkmask-demo:
    image: golang:1.23
    working_dir: /workspace
    volumes:
      - ./:/workspace
    command: >
      bash -lc "go run examples/make_demo_db.go demo.sqlite \
      && go run ./cmd/pinkmask copy --in demo.sqlite --out anon.sqlite --config examples/mask.yml --salt 'abc' --seed 1 \
      && go run ./examples/export_csv anon.sqlite users anon_users.csv"
